<!DOCTYPE HTML>
<html>
  <head>
    <script type="text/javascript">
      function WebSocketTest()
{
  if ("WebSocket" in window)
  {
    alert("WebSocket is supported by your Browser!");
    // Let us open a web socket
    var ws = new WebSocket("ws://localhost:8888/echo");
    ws.onopen = function()
    {
      // Web Socket is connected, send data using send()
      var messagesToSend = ["This", "is", "a", "websocket","through", "tcp", "test", "bye"];

      for(var i = 0; i < messagesToSend.length; i++)
      {
         ws.send(messagesToSend[i]);
      }
    };

    ws.onmessage = function (evt) 
    { 
      var reader = new FileReader();
      reader.addEventListener("loadend", function() {
          var newItem = document.createElement('li');
          newItem.innerHTML = reader.result;

          document.getElementById("result").appendChild(newItem);
      });
      reader.readAsText(evt.data);

    };

    ws.onclose = function()
    { 
      // websocket is closed.
      alert("Connection is closed..."); 
    };
  }
  else
  {
    // The browser doesn't support WebSocket
    alert("WebSocket NOT supported by your Browser!");
  }
}
</script>
</head>
<body>
  <div id="sse">
    <a href="javascript:WebSocketTest()">Run WebSocket</a>
  </div>

  <div>
    <ul id="result">
      
    </ul>
  </div>
</body>
</html>
